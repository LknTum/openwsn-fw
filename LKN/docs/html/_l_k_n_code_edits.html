<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>OpenWSN Smartgrid TSCH testbed: LKN code edits</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenWSN Smartgrid TSCH testbed
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LKN code edits </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="reflist">
<dt><a class="anchor" id="_LKN_code_edits000013"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#a58945f36d3b05dea65c4d7014283154a">activity_ri5</a>  (PORT_RADIOTIMER_WIDTH capturedTime)</dt>
<dd>From this function, we store the value of RSSI in the payload of our application.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000010"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#a365846cd666a324ee0d6ff55f79bb976">activity_ti1ORri1</a>  ()</dt>
<dd>We modified the function such that the mote can transmit or receive only if it is its own Time Slot. At the beginning, we set the value canTX to FALSE, then we turn it to TRUE by testing its address with respect of the current time slot.<ul>
<li>DAG root is always allowed to receive and transmit.</li>
<li>Motes are not allowed either to RX or TX in a Time Slot that doesn't match their address. </li>
</ul>
</dd>
<dt><a class="anchor" id="_LKN_code_edits000011"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#a84922abdd433852f6d5d415e677af1a8">activity_ti2</a>  ()</dt>
<dd>In this function, we store the calculated tx frequency in the fourth element of the payload of our application. Furthermore, we set the tx frequency to the <a class="el" href="group___i_e_e_e802154_e.html#gaf8be83417584fa06ecb6982f183bd222">SYNCHRONIZING_CHANNEL</a> if we need to send an EB beacon. </dd>
<dt><a class="anchor" id="_LKN_code_edits000012"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#a052e22d89b7e22b5c384c398e35d90c0">activity_tie5</a>  ()</dt>
<dd>In this function, we store the updated number of transmission attemps in the payload of our application.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000016"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#a01c55569f4f1aadf1d4a156b08014e50">calculateFrequency</a>  (uint8_t channelOffset)</dt>
<dd>Major changes to the function. We enable the calculations of the next frequency hop by checking the value of <a class="el" href="group___i_e_e_e802154_e.html#ga495914ac755e3089a99e6a6946c12971">HOPPING</a>, otherwise we always choose the <a class="el" href="group___i_e_e_e802154_e.html#gaf8be83417584fa06ecb6982f183bd222">SYNCHRONIZING_CHANNEL</a> </dd>
<dt><a class="anchor" id="_LKN_code_edits000004"></a>Member <a class="el" href="opendefs_8h.html#af6aaa0374ba3a63d8cac6f5396583f49">DAGROOT</a>  </dt>
<dd>DAG root definition  </dd>
<dt><a class="anchor" id="_LKN_code_edits000003"></a>Member <a class="el" href="group___open_serial.html#ga6499f570e793bb2111f482628e521a1b">ENABLE_PKT_COMPRESSION</a>  </dt>
<dd>Enable packet compression: allows to send more packets to the PC.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000028"></a>Member <a class="el" href="group___i_d_manager.html#ga3e974443ae75269d00c3de03992a1669">idmanager_init</a>  (void)</dt>
<dd>Modification of the IPv6 assignment of the device. Here both adresses are hardcoded and programmed using the script PROGRAMMING_SCRIPT.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000009"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#aa42be4c16fe53e0460a63ae76438d668">ieee154e_processIEs</a>  (<a class="el" href="struct_open_queue_entry__t.html">OpenQueueEntry_t</a> *pkt, uint16_t *lenIE)</dt>
<dd>We modified the function by correcting the calculation of the current SlotOffset. Thanks to the newly implemented <a class="el" href="_i_e_e_e802154_e_8c.html#aee836d385fb2379dd04956ad7b3cfe37" title="Enables the synchronization of the slotOffset upon receiving a new ASN value. The slotOffset is store...">ieee154e_syncSlotOffset()</a>, it is now possible to adapt to a dynamic range of frame length values.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000015"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#aee836d385fb2379dd04956ad7b3cfe37">ieee154e_syncSlotOffset</a>  ()</dt>
<dd>Implementation of the function based on the original function <a class="el" href="_i_e_e_e802154_e_8c.html#a8decad47b1e2b92bfc8a910f19d30ab3">ieee154e_syncAsnOffset</a>  </dd>
<dt><a class="anchor" id="_LKN_code_edits000014"></a>Member <a class="el" href="_i_e_e_e802154_e_8c.html#af7ddc5c9b10da0b029a6cdf13d40455d">incrementAsnOffset</a>  ()</dt>
<dd>We extended the function such that the slotOffset increment depends on the variable frameLength size, instead of the predefined value of 16.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000017"></a>Member <a class="el" href="group___neighbors.html#gaf83606573bb704d34705b540c226a0d9">MAXNUMNEIGHBORS</a>  </dt>
<dd>We increased the number of allowed neighbors in the neighbor table  </dd>
<dt><a class="anchor" id="_LKN_code_edits000023"></a>Member <a class="el" href="group___schedule.html#ga5206eabfac75eeed6f5066fb6d00f7c3">NUMSERIALRX</a>  </dt>
<dd>Number of slots used for serial transmission  </dd>
<dt><a class="anchor" id="_LKN_code_edits000024"></a>Member <a class="el" href="group___schedule.html#ga9fd457940c2d1313fb347b5fd32d2105">NUMSLOTSOFF</a>  </dt>
<dd>Number of slots NOT used, they are probably used in for serial transmission anyway.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000005"></a>Member <a class="el" href="03oos__macpong_8c.html#a1de6d1ec345a723478a2e1b8e049977a">openapps_init</a>  (void)</dt>
<dd>We enabled the initialization of uinject.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000002"></a>Member <a class="el" href="group___open_serial.html#ga773cc9fae5d0477d9eed107dce419c33">openserial_printData</a>  (uint8_t *buffer, uint8_t length)</dt>
<dd>Enable packet compression: allows to send more packets to the PC. We use the knowledge about the packet structure to print only necessary data from the packets, such as source id (address, shortened to uint8_t), payload (retransmission count, pkt sequence number, rssi and sending frequency). Also a frag byte "isCompressed" is printed for proper parsing by openvisualizer.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000029"></a>Member <a class="el" href="openstack_8h.html#a1aff0d46d66b585598f5d467ef0da799">openstack_init</a>  (void)</dt>
<dd>We enabled the initialization of uinject from the stack initialization.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000018"></a>Member <a class="el" href="process_i_e_8h.html#a222b2d57ad09b945b098f211cd159e53">processIE_prependSlotframeLinkIE</a>  (<a class="el" href="struct_open_queue_entry__t.html">OpenQueueEntry_t</a> *pkt)</dt>
<dd>We modified the function such that additional parameters concerning the link options and target address could be added to the packet. In particular, the 6-th element of the payload (payload[5]) will be used to store the address of the link-scheduling, and the linkOption contains meaningful information about the link state. </dd>
<dt><a class="anchor" id="_LKN_code_edits000019"></a>Member <a class="el" href="process_i_e_8h.html#a41d90fd25e8ce294b9d7632d43089c80">processIE_retrieveSlotframeLinkIE</a>  (<a class="el" href="struct_open_queue_entry__t.html">OpenQueueEntry_t</a> *pkt, uint8_t *ptr)</dt>
<dd>Our modification enables the extraction of the neighAddr and linkInfo information, previously included in the IE. In this way, we add to every new active slot the information about the target mote's address and link options. </dd>
<dt><a class="anchor" id="_LKN_code_edits000001"></a>Member <a class="el" href="group__radio.html#gaf181029cf06b94f0f4ceaafec1c3f209">radio_reset</a>  (void)</dt>
<dd>Power level set to predefined value 31 during our tests.  </dd>
<dt><a class="anchor" id="_LKN_code_edits000025"></a>Member <a class="el" href="group___schedule.html#ga299d7e29eb70888b68ace83fd3f1a8df">SCHEDULE_MINIMAL_6TISCH_ACTIVE_CELLS</a>  </dt>
<dd>MAXIMUM number is 13  </dd>
<dt><a class="anchor" id="_LKN_code_edits000027"></a>Member <a class="el" href="group___schedule.html#ga485a603a3e03059901c4fc5fc968a1e9">SCHEDULE_MINIMAL_6TISCH_CHANNELOFFSET</a>  </dt>
<dd>Default channel hopping offset set to 0  </dd>
<dt><a class="anchor" id="_LKN_code_edits000026"></a>Member <a class="el" href="group___schedule.html#ga62c64cb1c9bbbb2927f358c14535fb7f">SCHEDULE_MINIMAL_6TISCH_SLOTOFFSET</a>  </dt>
<dd>Default channel hopping offset set to 1  </dd>
<dt><a class="anchor" id="_LKN_code_edits000020"></a>Member <a class="el" href="group___schedule.html#gade694f312044f8bff151d58c7976d067">schedule_startDAGroot</a>  (void)</dt>
<dd>Modified to allow the DAG root to program the scheduling for the network </dd>
<dt><a class="anchor" id="_LKN_code_edits000022"></a>Member <a class="el" href="group___schedule.html#gaea12b586ec3f6de3ffcfff93da574345">SLOTFRAME_LENGTH</a>  </dt>
<dd>Detailed descriprion of scheduling modification is in <a class="el" href="_l_k_n_contribution.html#TSCH_scheduling">TSCH scheduling</a>. </dd>
<dt><a class="anchor" id="_LKN_code_edits000008"></a>Member <a class="el" href="group__uinject.html#ga5b31a0d33a0be3a28d77fbdba9a3e2b7">UINJECT_PERIOD_MS</a>  </dt>
<dd>Application periodicity  </dd>
<dt><a class="anchor" id="_LKN_code_edits000007"></a>Member <a class="el" href="uinject_8c.html#a59951fd503ef80b9526ba1eaaf952d9b">uinject_task_cb</a>  ()</dt>
<dd>Once the header of the packet is set, we increment the packet counter, and we reserve space for 5 bytes of additional information that will be stored later during the MAC layer operations.</dd>
</dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 23 2016 12:19:02 for OpenWSN Smartgrid TSCH testbed by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
