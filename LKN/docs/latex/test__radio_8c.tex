\hypertarget{test__radio_8c}{}\section{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/gina/old/test\+\_\+radio.c File Reference}
\label{test__radio_8c}\index{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/gina/old/test\+\_\+radio.\+c@{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/gina/old/test\+\_\+radio.\+c}}
{\ttfamily \#include \char`\"{}gina.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}leds.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}button.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}opendefs.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}scheduler.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}packetfunctions.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}openqueue.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}radio.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{test__radio_8c_a840291bc02cba5474a4cb46a9b9566fe}{main} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\begin{DoxyCompactList}\small\item\em This is a standalone test program for the L\+E\+Ds and 32k\+Hz crystal of the G\+I\+NA board. \end{DoxyCompactList}\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{test__radio_8c_a6b59ec2810c9d3e2e02f6ed56f1e29ec}{isr\+\_\+button} ()
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{test__radio_8c_afcddffa630b9262965dd888b5500a7d0}{stupidmac\+\_\+send\+Done} (\hyperlink{struct_open_queue_entry__t}{Open\+Queue\+Entry\+\_\+t} $\ast$pkt, error\+\_\+t \hyperlink{disk_8c_ad018a3100b2dabad325a0800152db297}{error})
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{test__radio_8c_a53b925c895fdf10986db21d1ec4893d7}{radio\+\_\+packet\+\_\+received} (\hyperlink{struct_open_queue_entry__t}{Open\+Queue\+Entry\+\_\+t} $\ast$packet\+Received)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_open_queue_entry__t}{Open\+Queue\+Entry\+\_\+t} $\ast$ \hyperlink{test__radio_8c_a464113350ec9f05645b9cb5db6d553d9}{test\+Radio\+Packet\+To\+Send}
\begin{DoxyCompactList}\small\item\em This is a standalone test program for the radio on the G\+I\+N\+A2.\+2b/c and G\+I\+NA basestation boards. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{test\+\_\+radio.\+c@{test\+\_\+radio.\+c}!isr\+\_\+button@{isr\+\_\+button}}
\index{isr\+\_\+button@{isr\+\_\+button}!test\+\_\+radio.\+c@{test\+\_\+radio.\+c}}
\subsubsection[{\texorpdfstring{isr\+\_\+button()}{isr_button()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} isr\+\_\+button (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{test__radio_8c_a6b59ec2810c9d3e2e02f6ed56f1e29ec}{}\label{test__radio_8c_a6b59ec2810c9d3e2e02f6ed56f1e29ec}


Definition at line 66 of file test\+\_\+radio.\+c.

\index{test\+\_\+radio.\+c@{test\+\_\+radio.\+c}!main@{main}}
\index{main@{main}!test\+\_\+radio.\+c@{test\+\_\+radio.\+c}}
\subsubsection[{\texorpdfstring{main(void)}{main(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{test__radio_8c_a840291bc02cba5474a4cb46a9b9566fe}{}\label{test__radio_8c_a840291bc02cba5474a4cb46a9b9566fe}


This is a standalone test program for the L\+E\+Ds and 32k\+Hz crystal of the G\+I\+NA board. 

\begin{DoxyNote}{Note}
The term \char`\"{}crystal\char`\"{} is usually written \char`\"{}\+X\+T\+A\+L\char`\"{} by embedded geeks.
\end{DoxyNote}
Download the program to a G\+I\+NA board, run it, you should see the 4 L\+E\+Ds blinking in sequence with a 500ms period.

The digital outputs are\+:
\begin{DoxyItemize}
\item P2.\+0\+: red L\+ED
\item P2.\+1\+: green L\+ED
\item P2.\+2\+: blue L\+ED
\item P2.\+3\+: red L\+ED
\end{DoxyItemize}

The \char`\"{}inputs\char`\"{} are\+:
\begin{DoxyItemize}
\item X\+IN, X\+O\+UT\+: 32768\+Hz crystal oscillator
\end{DoxyItemize}

The debug pins are\+:
\begin{DoxyItemize}
\item P5.\+6 output the A\+C\+LK (should be 32768\+Hz)
\item P1.\+1 toggles when interrupt T\+I\+M\+E\+R\+A0\+\_\+\+V\+E\+C\+T\+OR fires
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, February 2012 The program starts executing here.
\end{DoxyAuthor}
This is a standalone test program for the L\+E\+Ds and 32k\+Hz crystal of the G\+I\+NA board.

The digital U\+A\+RT interface is\+:
\begin{DoxyItemize}
\item P3.\+7\+: A1\+\_\+\+S\+O\+M\+I\+\_\+\+RX
\item P3.\+8\+: A1\+\_\+\+S\+O\+M\+I\+\_\+\+TX
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, February 2012 The program starts executing here. 
\end{DoxyAuthor}


Definition at line 49 of file test\+\_\+radio.\+c.

\index{test\+\_\+radio.\+c@{test\+\_\+radio.\+c}!radio\+\_\+packet\+\_\+received@{radio\+\_\+packet\+\_\+received}}
\index{radio\+\_\+packet\+\_\+received@{radio\+\_\+packet\+\_\+received}!test\+\_\+radio.\+c@{test\+\_\+radio.\+c}}
\subsubsection[{\texorpdfstring{radio\+\_\+packet\+\_\+received(\+Open\+Queue\+Entry\+\_\+t $\ast$packet\+Received)}{radio_packet_received(OpenQueueEntry_t *packetReceived)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} radio\+\_\+packet\+\_\+received (
\begin{DoxyParamCaption}
\item[{{\bf Open\+Queue\+Entry\+\_\+t} $\ast$}]{packet\+Received}
\end{DoxyParamCaption}
)}\hypertarget{test__radio_8c_a53b925c895fdf10986db21d1ec4893d7}{}\label{test__radio_8c_a53b925c895fdf10986db21d1ec4893d7}


Definition at line 90 of file test\+\_\+radio.\+c.

\index{test\+\_\+radio.\+c@{test\+\_\+radio.\+c}!stupidmac\+\_\+send\+Done@{stupidmac\+\_\+send\+Done}}
\index{stupidmac\+\_\+send\+Done@{stupidmac\+\_\+send\+Done}!test\+\_\+radio.\+c@{test\+\_\+radio.\+c}}
\subsubsection[{\texorpdfstring{stupidmac\+\_\+send\+Done(\+Open\+Queue\+Entry\+\_\+t $\ast$pkt, error\+\_\+t error)}{stupidmac_sendDone(OpenQueueEntry_t *pkt, error_t error)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} stupidmac\+\_\+send\+Done (
\begin{DoxyParamCaption}
\item[{{\bf Open\+Queue\+Entry\+\_\+t} $\ast$}]{pkt, }
\item[{error\+\_\+t}]{error}
\end{DoxyParamCaption}
)}\hypertarget{test__radio_8c_afcddffa630b9262965dd888b5500a7d0}{}\label{test__radio_8c_afcddffa630b9262965dd888b5500a7d0}


Definition at line 86 of file test\+\_\+radio.\+c.



\subsection{Variable Documentation}
\index{test\+\_\+radio.\+c@{test\+\_\+radio.\+c}!test\+Radio\+Packet\+To\+Send@{test\+Radio\+Packet\+To\+Send}}
\index{test\+Radio\+Packet\+To\+Send@{test\+Radio\+Packet\+To\+Send}!test\+\_\+radio.\+c@{test\+\_\+radio.\+c}}
\subsubsection[{\texorpdfstring{test\+Radio\+Packet\+To\+Send}{testRadioPacketToSend}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Open\+Queue\+Entry\+\_\+t}$\ast$ test\+Radio\+Packet\+To\+Send}\hypertarget{test__radio_8c_a464113350ec9f05645b9cb5db6d553d9}{}\label{test__radio_8c_a464113350ec9f05645b9cb5db6d553d9}


This is a standalone test program for the radio on the G\+I\+N\+A2.\+2b/c and G\+I\+NA basestation boards. 

Download the program to a platform, run it\+:
\begin{DoxyItemize}
\item when you press the A\+UX button, a packet gets sent which contains 5 payload bytes\+: 0x0102030405. The L\+E\+Ds should also circular-\/shift;
\item when the board receives a packet, the L\+E\+Ds circular-\/shift.
\end{DoxyItemize}

The S\+PI interface to the radio is\+:
\begin{DoxyItemize}
\item P3.\+0\+: A0\+\_\+\+R\+F\+\_\+\+S\+C\+LK
\item P3.\+4\+: A0\+\_\+\+R\+F\+\_\+\+S\+I\+MO
\item P3.\+5\+: A0\+\_\+\+R\+F\+\_\+\+S\+O\+MI
\item P4.\+0\+: /\+E\+N\+\_\+\+RF, chip select (active low)
\end{DoxyItemize}

Digital pins to the radio are\+:
\begin{DoxyItemize}
\item P4.\+7\+: S\+L\+P\+\_\+\+T\+R\+\_\+\+C\+N\+TL, when high, forces radio to sleep mode (not used)
\end{DoxyItemize}

Interrupt pins from radio\+:
\begin{DoxyItemize}
\item P1.\+6\+: I\+R\+Q\+\_\+\+RF, programmable interrupt
\end{DoxyItemize}

Other \char`\"{}debug\char`\"{} pins are\+:
\begin{DoxyItemize}
\item P1.\+1\+: toggles at every sent packet
\item P1.\+2\+: high during configuration
\item P2.\+7\+: button
\item P4.\+6\+: mimicks the /\+E\+N\+\_\+\+RF (P4.\+0) pin for scope-\/based debugging
\item P2.\+0\+: red L\+ED
\item P2.\+1\+: green L\+ED
\item P2.\+2\+: blue L\+ED
\item P2.\+3\+: red L\+ED
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, August 2010 
\end{DoxyAuthor}


Definition at line 47 of file test\+\_\+radio.\+c.

