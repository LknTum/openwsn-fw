\hypertarget{group__bsp__timer}{}\section{Bsp\+\_\+timer}
\label{group__bsp__timer}\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}}


Cross-\/platform declaration \char`\"{}bsp\+\_\+timer\char`\"{} bsp module.  


\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void}($\ast$ \hyperlink{group__bsp__timer_ga70c37f3709ac6eb30352181337000ba4}{bsp\+\_\+timer\+\_\+cbt}) (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{group__bsp__timer_gaffec2bf6372cf491a97821c19abad0fa}{bsp\+\_\+timer\+\_\+init} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\begin{DoxyCompactList}\small\item\em Initialize this module. \end{DoxyCompactList}\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{group__bsp__timer_ga3a31a787657dccde5a1895fc87578589}{bsp\+\_\+timer\+\_\+set\+\_\+callback} (\hyperlink{openwsnmodule__obj_8h_a217f88f41d2d57897598ce4147c80419}{bsp\+\_\+timer\+\_\+cbt} cb)
\begin{DoxyCompactList}\small\item\em Register a callback. \end{DoxyCompactList}\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{group__bsp__timer_ga797994251b8540f4be7628411cb98c73}{bsp\+\_\+timer\+\_\+reset} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\begin{DoxyCompactList}\small\item\em Reset the timer. \end{DoxyCompactList}\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{group__bsp__timer_gac6b96b1c74c2fd8a4c307831d0fc7528}{bsp\+\_\+timer\+\_\+schedule\+In} (\hyperlink{z1_2board__info_8h_abe66b9c1c60db84f2a99f2b827275f24}{P\+O\+R\+T\+\_\+\+T\+I\+M\+E\+R\+\_\+\+W\+I\+D\+TH} delay\+Ticks)
\begin{DoxyCompactList}\small\item\em Schedule the callback to be called in some specified time. \end{DoxyCompactList}\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{group__bsp__timer_ga46f9e9c7fb4f454fdc1febf216409ed6}{bsp\+\_\+timer\+\_\+cancel\+\_\+schedule} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\begin{DoxyCompactList}\small\item\em Cancel a running compare. \end{DoxyCompactList}\item 
\hyperlink{z1_2board__info_8h_abe66b9c1c60db84f2a99f2b827275f24}{P\+O\+R\+T\+\_\+\+T\+I\+M\+E\+R\+\_\+\+W\+I\+D\+TH} \hyperlink{group__bsp__timer_gae648940e8aa53efe781a7bbb056a9e50}{bsp\+\_\+timer\+\_\+get\+\_\+current\+Value} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\begin{DoxyCompactList}\small\item\em Return the current value of the timer\textquotesingle{}s counter. \end{DoxyCompactList}\item 
\hyperlink{group__board_gac9ebdcc0a4f3c8422f5f4f0fbbe0ded0}{kick\+\_\+scheduler\+\_\+t} \hyperlink{group__bsp__timer_ga1e6f08f2808b6c73ae3ee4d31346abb9}{bsp\+\_\+timer\+\_\+isr} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Cross-\/platform declaration \char`\"{}bsp\+\_\+timer\char`\"{} bsp module. 

\begin{DoxyAuthor}{Author}
Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, March 2012. 
\end{DoxyAuthor}


\subsection{Typedef Documentation}
\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+cbt@{bsp\+\_\+timer\+\_\+cbt}}
\index{bsp\+\_\+timer\+\_\+cbt@{bsp\+\_\+timer\+\_\+cbt}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+cbt}{bsp_timer_cbt}}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf void}($\ast$ bsp\+\_\+timer\+\_\+cbt) ({\bf void})}\hypertarget{group__bsp__timer_ga70c37f3709ac6eb30352181337000ba4}{}\label{group__bsp__timer_ga70c37f3709ac6eb30352181337000ba4}


Definition at line 22 of file bsp\+\_\+timer.\+h.



\subsection{Function Documentation}
\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+cancel\+\_\+schedule@{bsp\+\_\+timer\+\_\+cancel\+\_\+schedule}}
\index{bsp\+\_\+timer\+\_\+cancel\+\_\+schedule@{bsp\+\_\+timer\+\_\+cancel\+\_\+schedule}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+cancel\+\_\+schedule(void)}{bsp_timer_cancel_schedule(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} bsp\+\_\+timer\+\_\+cancel\+\_\+schedule (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__bsp__timer_ga46f9e9c7fb4f454fdc1febf216409ed6}{}\label{group__bsp__timer_ga46f9e9c7fb4f454fdc1febf216409ed6}


Cancel a running compare. 



Definition at line 155 of file bsp\+\_\+timer.\+c.

\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+get\+\_\+current\+Value@{bsp\+\_\+timer\+\_\+get\+\_\+current\+Value}}
\index{bsp\+\_\+timer\+\_\+get\+\_\+current\+Value@{bsp\+\_\+timer\+\_\+get\+\_\+current\+Value}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+get\+\_\+current\+Value(void)}{bsp_timer_get_currentValue(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf P\+O\+R\+T\+\_\+\+T\+I\+M\+E\+R\+\_\+\+W\+I\+D\+TH} bsp\+\_\+timer\+\_\+get\+\_\+current\+Value (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__bsp__timer_gae648940e8aa53efe781a7bbb056a9e50}{}\label{group__bsp__timer_gae648940e8aa53efe781a7bbb056a9e50}


Return the current value of the timer\textquotesingle{}s counter. 

\begin{DoxyReturn}{Returns}
The current value of the timer\textquotesingle{}s counter. 
\end{DoxyReturn}


Definition at line 166 of file bsp\+\_\+timer.\+c.

\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+init@{bsp\+\_\+timer\+\_\+init}}
\index{bsp\+\_\+timer\+\_\+init@{bsp\+\_\+timer\+\_\+init}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+init(void)}{bsp_timer_init(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} bsp\+\_\+timer\+\_\+init (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__bsp__timer_gaffec2bf6372cf491a97821c19abad0fa}{}\label{group__bsp__timer_gaffec2bf6372cf491a97821c19abad0fa}


Initialize this module. 

This functions starts the timer, i.\+e. the counter increments, but doesn\textquotesingle{}t set any compare registers, so no interrupt will fire.

This functions starts the timer 

Definition at line 37 of file bsp\+\_\+timer.\+c.

\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+isr@{bsp\+\_\+timer\+\_\+isr}}
\index{bsp\+\_\+timer\+\_\+isr@{bsp\+\_\+timer\+\_\+isr}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+isr(void)}{bsp_timer_isr(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf kick\+\_\+scheduler\+\_\+t} bsp\+\_\+timer\+\_\+isr (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__bsp__timer_ga1e6f08f2808b6c73ae3ee4d31346abb9}{}\label{group__bsp__timer_ga1e6f08f2808b6c73ae3ee4d31346abb9}


Definition at line 175 of file bsp\+\_\+timer.\+c.

\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+reset@{bsp\+\_\+timer\+\_\+reset}}
\index{bsp\+\_\+timer\+\_\+reset@{bsp\+\_\+timer\+\_\+reset}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+reset(void)}{bsp_timer_reset(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} bsp\+\_\+timer\+\_\+reset (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{group__bsp__timer_ga797994251b8540f4be7628411cb98c73}{}\label{group__bsp__timer_ga797994251b8540f4be7628411cb98c73}


Reset the timer. 

This function does not stop the timer, it rather resets the value of the counter, and cancels a possible pending compare event. 

Definition at line 93 of file bsp\+\_\+timer.\+c.

\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+schedule\+In@{bsp\+\_\+timer\+\_\+schedule\+In}}
\index{bsp\+\_\+timer\+\_\+schedule\+In@{bsp\+\_\+timer\+\_\+schedule\+In}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+schedule\+In(\+P\+O\+R\+T\+\_\+\+T\+I\+M\+E\+R\+\_\+\+W\+I\+D\+T\+H delay\+Ticks)}{bsp_timer_scheduleIn(PORT_TIMER_WIDTH delayTicks)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} bsp\+\_\+timer\+\_\+schedule\+In (
\begin{DoxyParamCaption}
\item[{{\bf P\+O\+R\+T\+\_\+\+T\+I\+M\+E\+R\+\_\+\+W\+I\+D\+TH}}]{delay\+Ticks}
\end{DoxyParamCaption}
)}\hypertarget{group__bsp__timer_gac6b96b1c74c2fd8a4c307831d0fc7528}{}\label{group__bsp__timer_gac6b96b1c74c2fd8a4c307831d0fc7528}


Schedule the callback to be called in some specified time. 

The delay is expressed relative to the last compare event. It doesn\textquotesingle{}t matter how long it took to call this function after the last compare, the timer will expire precisely delay\+Ticks after the last one.

The only possible problem is that it took so long to call this function that the delay specified is shorter than the time already elapsed since the last compare. In that case, this function triggers the interrupt to fire right away.

This means that the interrupt may fire a bit off, but this inaccuracy does not propagate to subsequent timers.


\begin{DoxyParams}{Parameters}
{\em delay\+Ticks} & Number of ticks before the timer expired, relative to the last compare event. \\
\hline
\end{DoxyParams}


Definition at line 126 of file bsp\+\_\+timer.\+c.

\index{Bsp\+\_\+timer@{Bsp\+\_\+timer}!bsp\+\_\+timer\+\_\+set\+\_\+callback@{bsp\+\_\+timer\+\_\+set\+\_\+callback}}
\index{bsp\+\_\+timer\+\_\+set\+\_\+callback@{bsp\+\_\+timer\+\_\+set\+\_\+callback}!Bsp\+\_\+timer@{Bsp\+\_\+timer}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+set\+\_\+callback(bsp\+\_\+timer\+\_\+cbt cb)}{bsp_timer_set_callback(bsp_timer_cbt cb)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} bsp\+\_\+timer\+\_\+set\+\_\+callback (
\begin{DoxyParamCaption}
\item[{{\bf bsp\+\_\+timer\+\_\+cbt}}]{cb}
\end{DoxyParamCaption}
)}\hypertarget{group__bsp__timer_ga3a31a787657dccde5a1895fc87578589}{}\label{group__bsp__timer_ga3a31a787657dccde5a1895fc87578589}


Register a callback. 


\begin{DoxyParams}{Parameters}
{\em cb} & The function to be called when a compare event happens. \\
\hline
\end{DoxyParams}


Definition at line 80 of file bsp\+\_\+timer.\+c.

