\hypertarget{01bsp__closetimers_8c}{}\section{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/common/01bsp\+\_\+closetimers/01bsp\+\_\+closetimers.c File Reference}
\label{01bsp__closetimers_8c}\index{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/common/01bsp\+\_\+closetimers/01bsp\+\_\+closetimers.\+c@{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/common/01bsp\+\_\+closetimers/01bsp\+\_\+closetimers.\+c}}
{\ttfamily \#include \char`\"{}stdint.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}string.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}board.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}debugpins.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}leds.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bsp\+\_\+timer.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}radiotimer.\+h\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structapp__dbg__t}{app\+\_\+dbg\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{01bsp__closetimers_8c_a3faf66954cf820134de466ddd82f2cd4}{B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD}~0x800
\begin{DoxyCompactList}\small\item\em This program uses of both the \char`\"{}bsp\+\_\+timer\char`\"{} and \char`\"{}radiotimer\char`\"{} bsp modules and schedules timers very close together, with long I\+S\+Rs. \end{DoxyCompactList}\item 
\#define \hyperlink{01bsp__closetimers_8c_a5bd991fe07ad884003fd692fc8db5e98}{R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD}~0x801
\item 
\#define \hyperlink{01bsp__closetimers_8c_aa88c90647d8d75209698c15d3c4e02f2}{I\+S\+R\+\_\+\+D\+E\+L\+AY}~2000
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{01bsp__closetimers_8c_a747f6af439aa308c59da9b5e684507ff}{bsp\+\_\+timer\+\_\+cb\+\_\+compare} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{01bsp__closetimers_8c_a1667b08847deef5142262c17d0e235fe}{radiotimer\+\_\+cb\+\_\+overflow} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{01bsp__closetimers_8c_ada3e67c8a0d6228d6878f57a5ce6df68}{radiotimer\+\_\+cb\+\_\+compare} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{01bsp__closetimers_8c_a8e83761652f98a427e449b4b1adb08e3}{small\+\_\+delay} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\item 
int \hyperlink{01bsp__closetimers_8c_ad0caa506af897a3ebe6699aa0c0da367}{mote\+\_\+main} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\begin{DoxyCompactList}\small\item\em The program starts executing here. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structapp__dbg__t}{app\+\_\+dbg\+\_\+t} \hyperlink{01bsp__closetimers_8c_a462568f64e17a76f796aa9c827311428}{app\+\_\+dbg}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD@{B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD}}
\index{B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD@{B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD}{BSP_TIMER_PERIOD}}]{\setlength{\rightskip}{0pt plus 5cm}\#define B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD~0x800}\hypertarget{01bsp__closetimers_8c_a3faf66954cf820134de466ddd82f2cd4}{}\label{01bsp__closetimers_8c_a3faf66954cf820134de466ddd82f2cd4}


This program uses of both the \char`\"{}bsp\+\_\+timer\char`\"{} and \char`\"{}radiotimer\char`\"{} bsp modules and schedules timers very close together, with long I\+S\+Rs. 

Since the bsp modules for different platforms have the same declaration, you can use this project with any platform.

This project is to verify all is well when the B\+SP timer and radiotimer are fire at about the same time.

Load this program onto your board, and start running. It will enable the B\+SP timer and radiotimer\+:
\begin{DoxyItemize}
\item the B\+SP timer is periodic, of period B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD ticks. Each time it elapses\+:
\begin{DoxyItemize}
\item the frame debugpin toggles
\item the error L\+ED toggles
\end{DoxyItemize}
\item the radiotimer overflows every R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD. Each time it elapses\+:
\begin{DoxyItemize}
\item the slot debugpin toggles
\item the radio L\+ED toggles
\end{DoxyItemize}
\end{DoxyItemize}

Because the values of B\+S\+P\+\_\+\+T\+I\+M\+E\+R\+\_\+\+P\+E\+R\+I\+OD and R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD are so close, you should see the L\+E\+Ds (and debugpins) slowly go out of phase and in phase.

\begin{DoxyAuthor}{Author}
Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, May 2012. 
\end{DoxyAuthor}


Definition at line 39 of file 01bsp\+\_\+closetimers.\+c.

\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!I\+S\+R\+\_\+\+D\+E\+L\+AY@{I\+S\+R\+\_\+\+D\+E\+L\+AY}}
\index{I\+S\+R\+\_\+\+D\+E\+L\+AY@{I\+S\+R\+\_\+\+D\+E\+L\+AY}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{I\+S\+R\+\_\+\+D\+E\+L\+AY}{ISR_DELAY}}]{\setlength{\rightskip}{0pt plus 5cm}\#define I\+S\+R\+\_\+\+D\+E\+L\+AY~2000}\hypertarget{01bsp__closetimers_8c_aa88c90647d8d75209698c15d3c4e02f2}{}\label{01bsp__closetimers_8c_aa88c90647d8d75209698c15d3c4e02f2}


Definition at line 41 of file 01bsp\+\_\+closetimers.\+c.

\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD@{R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD}}
\index{R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD@{R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD}{RADIOTIMER_OVERFLOW_PERIOD}}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+A\+D\+I\+O\+T\+I\+M\+E\+R\+\_\+\+O\+V\+E\+R\+F\+L\+O\+W\+\_\+\+P\+E\+R\+I\+OD~0x801}\hypertarget{01bsp__closetimers_8c_a5bd991fe07ad884003fd692fc8db5e98}{}\label{01bsp__closetimers_8c_a5bd991fe07ad884003fd692fc8db5e98}


Definition at line 40 of file 01bsp\+\_\+closetimers.\+c.



\subsection{Function Documentation}
\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!bsp\+\_\+timer\+\_\+cb\+\_\+compare@{bsp\+\_\+timer\+\_\+cb\+\_\+compare}}
\index{bsp\+\_\+timer\+\_\+cb\+\_\+compare@{bsp\+\_\+timer\+\_\+cb\+\_\+compare}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{bsp\+\_\+timer\+\_\+cb\+\_\+compare(void)}{bsp_timer_cb_compare(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} bsp\+\_\+timer\+\_\+cb\+\_\+compare (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{01bsp__closetimers_8c_a747f6af439aa308c59da9b5e684507ff}{}\label{01bsp__closetimers_8c_a747f6af439aa308c59da9b5e684507ff}


Definition at line 89 of file 01bsp\+\_\+closetimers.\+c.

\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!mote\+\_\+main@{mote\+\_\+main}}
\index{mote\+\_\+main@{mote\+\_\+main}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{mote\+\_\+main(void)}{mote_main(void)}}]{\setlength{\rightskip}{0pt plus 5cm}int mote\+\_\+main (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{01bsp__closetimers_8c_ad0caa506af897a3ebe6699aa0c0da367}{}\label{01bsp__closetimers_8c_ad0caa506af897a3ebe6699aa0c0da367}


The program starts executing here. 

Z1-\/specific definition of the \char`\"{}board\char`\"{} bsp module.

W\+S\+N430v13b-\/specific definition of the \char`\"{}board\char`\"{} bsp module.

Telos\+B-\/specific definition of the \char`\"{}board\char`\"{} bsp module.

Python-\/based emulation of the mote\textquotesingle{}s power supply.

iot-\/lab\+\_\+\+M3 definition of the \char`\"{}board\char`\"{} bsp module.

iot-\/lab\+\_\+\+A8-\/\+M3 definition of the \char`\"{}board\char`\"{} bsp module.

G\+I\+N\+A-\/specific definition of the \char`\"{}board\char`\"{} bsp module.

e\+Z430-\/\+R\+F2500-\/specific definition of the \char`\"{}board\char`\"{} bsp module.

openmote\+S\+T\+M32 definition of the \char`\"{}board\char`\"{} bsp module. 

Definition at line 64 of file 01bsp\+\_\+closetimers.\+c.

\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!radiotimer\+\_\+cb\+\_\+compare@{radiotimer\+\_\+cb\+\_\+compare}}
\index{radiotimer\+\_\+cb\+\_\+compare@{radiotimer\+\_\+cb\+\_\+compare}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{radiotimer\+\_\+cb\+\_\+compare(void)}{radiotimer_cb_compare(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} radiotimer\+\_\+cb\+\_\+compare (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{01bsp__closetimers_8c_ada3e67c8a0d6228d6878f57a5ce6df68}{}\label{01bsp__closetimers_8c_ada3e67c8a0d6228d6878f57a5ce6df68}


Definition at line 122 of file 01bsp\+\_\+closetimers.\+c.

\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!radiotimer\+\_\+cb\+\_\+overflow@{radiotimer\+\_\+cb\+\_\+overflow}}
\index{radiotimer\+\_\+cb\+\_\+overflow@{radiotimer\+\_\+cb\+\_\+overflow}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{radiotimer\+\_\+cb\+\_\+overflow(void)}{radiotimer_cb_overflow(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} radiotimer\+\_\+cb\+\_\+overflow (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{01bsp__closetimers_8c_a1667b08847deef5142262c17d0e235fe}{}\label{01bsp__closetimers_8c_a1667b08847deef5142262c17d0e235fe}


Definition at line 107 of file 01bsp\+\_\+closetimers.\+c.

\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!small\+\_\+delay@{small\+\_\+delay}}
\index{small\+\_\+delay@{small\+\_\+delay}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{small\+\_\+delay(void)}{small_delay(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} small\+\_\+delay (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{01bsp__closetimers_8c_a8e83761652f98a427e449b4b1adb08e3}{}\label{01bsp__closetimers_8c_a8e83761652f98a427e449b4b1adb08e3}


Definition at line 126 of file 01bsp\+\_\+closetimers.\+c.



\subsection{Variable Documentation}
\index{01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}!app\+\_\+dbg@{app\+\_\+dbg}}
\index{app\+\_\+dbg@{app\+\_\+dbg}!01bsp\+\_\+closetimers.\+c@{01bsp\+\_\+closetimers.\+c}}
\subsubsection[{\texorpdfstring{app\+\_\+dbg}{app_dbg}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf app\+\_\+dbg\+\_\+t} app\+\_\+dbg}\hypertarget{01bsp__closetimers_8c_a462568f64e17a76f796aa9c827311428}{}\label{01bsp__closetimers_8c_a462568f64e17a76f796aa9c827311428}


Definition at line 50 of file 01bsp\+\_\+closetimers.\+c.

