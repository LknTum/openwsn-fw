\hypertarget{ssp__spi__wrapper_8c}{}\section{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/bsp/boards/xpressohack/ssp\+\_\+spi\+\_\+wrapper.c File Reference}
\label{ssp__spi__wrapper_8c}\index{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/bsp/boards/xpressohack/ssp\+\_\+spi\+\_\+wrapper.\+c@{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/bsp/boards/xpressohack/ssp\+\_\+spi\+\_\+wrapper.\+c}}
{\ttfamily \#include \char`\"{}board.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}clkpwr.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}L\+P\+C17xx.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ssp.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}spi.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lpc17xx\+\_\+pinsel.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ssp__spi__wrapper_8c_aee89f642bb559e12db93e9f412ea185e}{S\+P\+I\+\_\+\+S\+C\+K\+\_\+\+P\+IN}~7        /$\ast$ Clock       $\ast$/
\begin{DoxyCompactList}\small\item\em L\+P\+C17\+X\+X-\/specific definition of the \char`\"{}spi\char`\"{} bsp module. Adapted from C\+M\+S\+IS L\+PC S\+SP module. \end{DoxyCompactList}\item 
\#define \hyperlink{ssp__spi__wrapper_8c_a0ff87ac68f9301e47ea7da80f50af3e7}{S\+P\+I\+\_\+\+S\+S\+E\+L\+\_\+\+P\+IN}~6        /$\ast$ CS-\/Select    $\ast$/
\item 
\#define \hyperlink{ssp__spi__wrapper_8c_a315722498711fce1e1aa6ea6654385cf}{S\+P\+I\+\_\+\+M\+I\+S\+O\+\_\+\+P\+IN}~8        /$\ast$ from Slave    $\ast$/
\item 
\#define \hyperlink{ssp__spi__wrapper_8c_a67d2c0b6e0ecbd0351958756e4830172}{S\+P\+I\+\_\+\+M\+O\+S\+I\+\_\+\+P\+IN}~9        /$\ast$ to Slave       $\ast$/
\item 
\#define \hyperlink{ssp__spi__wrapper_8c_adc2859b88c022ccb5916f671f08f43ca}{P\+I\+N\+\_\+\+M\+A\+S\+K\+\_\+\+CS}~(1$<$$<$6)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{ssp__spi__wrapper_8c_a698ab9851682a1cb27c01ae86954f1b6}{ssp\+\_\+spi\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em S\+S\+P-\/\+S\+PI bridge to hide the use of S\+SP instead of S\+PI. \end{DoxyCompactList}\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{ssp__spi__wrapper_8c_a7076dfc612a28f48a38953ac064499fc}{ssp\+\_\+spi\+\_\+txrx} (\hyperlink{_p_e___types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$buf\+Tx, \hyperlink{_p_e___types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} lenbuf\+Tx, \hyperlink{spi_8h_acc3b28d69cd1e029d05f77aa7d1ede06}{spi\+\_\+return\+\_\+t} return\+Type, \hyperlink{_p_e___types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$buf\+Rx, \hyperlink{_p_e___types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} max\+Len\+Buf\+Rx, \hyperlink{spi_8h_af5f18ca9b261f81e8649655fa1bdb3a2}{spi\+\_\+first\+\_\+t} is\+First, \hyperlink{spi_8h_a6a8a77d768dca340b71324f2aec66a97}{spi\+\_\+last\+\_\+t} is\+Last)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}!P\+I\+N\+\_\+\+M\+A\+S\+K\+\_\+\+CS@{P\+I\+N\+\_\+\+M\+A\+S\+K\+\_\+\+CS}}
\index{P\+I\+N\+\_\+\+M\+A\+S\+K\+\_\+\+CS@{P\+I\+N\+\_\+\+M\+A\+S\+K\+\_\+\+CS}!ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}}
\subsubsection[{\texorpdfstring{P\+I\+N\+\_\+\+M\+A\+S\+K\+\_\+\+CS}{PIN_MASK_CS}}]{\setlength{\rightskip}{0pt plus 5cm}\#define P\+I\+N\+\_\+\+M\+A\+S\+K\+\_\+\+CS~(1$<$$<$6)}\hypertarget{ssp__spi__wrapper_8c_adc2859b88c022ccb5916f671f08f43ca}{}\label{ssp__spi__wrapper_8c_adc2859b88c022ccb5916f671f08f43ca}


Definition at line 19 of file ssp\+\_\+spi\+\_\+wrapper.\+c.

\index{ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}!S\+P\+I\+\_\+\+M\+I\+S\+O\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+M\+I\+S\+O\+\_\+\+P\+IN}}
\index{S\+P\+I\+\_\+\+M\+I\+S\+O\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+M\+I\+S\+O\+\_\+\+P\+IN}!ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+\+M\+I\+S\+O\+\_\+\+P\+IN}{SPI_MISO_PIN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+P\+I\+\_\+\+M\+I\+S\+O\+\_\+\+P\+IN~8        /$\ast$ from Slave    $\ast$/}\hypertarget{ssp__spi__wrapper_8c_a315722498711fce1e1aa6ea6654385cf}{}\label{ssp__spi__wrapper_8c_a315722498711fce1e1aa6ea6654385cf}


Definition at line 16 of file ssp\+\_\+spi\+\_\+wrapper.\+c.

\index{ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}!S\+P\+I\+\_\+\+M\+O\+S\+I\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+M\+O\+S\+I\+\_\+\+P\+IN}}
\index{S\+P\+I\+\_\+\+M\+O\+S\+I\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+M\+O\+S\+I\+\_\+\+P\+IN}!ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+\+M\+O\+S\+I\+\_\+\+P\+IN}{SPI_MOSI_PIN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+P\+I\+\_\+\+M\+O\+S\+I\+\_\+\+P\+IN~9        /$\ast$ to Slave       $\ast$/}\hypertarget{ssp__spi__wrapper_8c_a67d2c0b6e0ecbd0351958756e4830172}{}\label{ssp__spi__wrapper_8c_a67d2c0b6e0ecbd0351958756e4830172}


Definition at line 17 of file ssp\+\_\+spi\+\_\+wrapper.\+c.

\index{ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}!S\+P\+I\+\_\+\+S\+C\+K\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+S\+C\+K\+\_\+\+P\+IN}}
\index{S\+P\+I\+\_\+\+S\+C\+K\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+S\+C\+K\+\_\+\+P\+IN}!ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+\+S\+C\+K\+\_\+\+P\+IN}{SPI_SCK_PIN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+P\+I\+\_\+\+S\+C\+K\+\_\+\+P\+IN~7        /$\ast$ Clock       $\ast$/}\hypertarget{ssp__spi__wrapper_8c_aee89f642bb559e12db93e9f412ea185e}{}\label{ssp__spi__wrapper_8c_aee89f642bb559e12db93e9f412ea185e}


L\+P\+C17\+X\+X-\/specific definition of the \char`\"{}spi\char`\"{} bsp module. Adapted from C\+M\+S\+IS L\+PC S\+SP module. 

\begin{DoxyAuthor}{Author}
Xavi Vilajosana \href{mailto:xvilajosana@eecs.berkeley.edu}{\tt xvilajosana@eecs.\+berkeley.\+edu}, February 2012. 
\end{DoxyAuthor}


Definition at line 14 of file ssp\+\_\+spi\+\_\+wrapper.\+c.

\index{ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}!S\+P\+I\+\_\+\+S\+S\+E\+L\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+S\+S\+E\+L\+\_\+\+P\+IN}}
\index{S\+P\+I\+\_\+\+S\+S\+E\+L\+\_\+\+P\+IN@{S\+P\+I\+\_\+\+S\+S\+E\+L\+\_\+\+P\+IN}!ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}}
\subsubsection[{\texorpdfstring{S\+P\+I\+\_\+\+S\+S\+E\+L\+\_\+\+P\+IN}{SPI_SSEL_PIN}}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\+P\+I\+\_\+\+S\+S\+E\+L\+\_\+\+P\+IN~6        /$\ast$ CS-\/Select    $\ast$/}\hypertarget{ssp__spi__wrapper_8c_a0ff87ac68f9301e47ea7da80f50af3e7}{}\label{ssp__spi__wrapper_8c_a0ff87ac68f9301e47ea7da80f50af3e7}


Definition at line 15 of file ssp\+\_\+spi\+\_\+wrapper.\+c.



\subsection{Function Documentation}
\index{ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}!ssp\+\_\+spi\+\_\+init@{ssp\+\_\+spi\+\_\+init}}
\index{ssp\+\_\+spi\+\_\+init@{ssp\+\_\+spi\+\_\+init}!ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}}
\subsubsection[{\texorpdfstring{ssp\+\_\+spi\+\_\+init()}{ssp_spi_init()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} ssp\+\_\+spi\+\_\+init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{ssp__spi__wrapper_8c_a698ab9851682a1cb27c01ae86954f1b6}{}\label{ssp__spi__wrapper_8c_a698ab9851682a1cb27c01ae86954f1b6}


S\+S\+P-\/\+S\+PI bridge to hide the use of S\+SP instead of S\+PI. 

\begin{DoxyAuthor}{Author}
Xavi Vilajosana \href{mailto:xvilajosana@eecs.berkeley.edu}{\tt xvilajosana@eecs.\+berkeley.\+edu}, March 2012. The S\+PI module functions in two modes\+:
\begin{DoxyItemize}
\item in \char`\"{}blocking\char`\"{} mode, all calls return only when the module is done. the C\+PU is not available while the module is busy. This is the preferred method is low-\/\+R\+AM system which can not run an R\+T\+OS
\item in \char`\"{}interrupt\char`\"{} mode, calls are returned after the module has started a transaction. When the transaction is done, the module uses a callback function to signal this to the caller. This frees up C\+PU time, allowing for other operations to happen concurrently. This is the preferred method when an R\+T\+OS is present. 
\end{DoxyItemize}
\end{DoxyAuthor}


Definition at line 21 of file ssp\+\_\+spi\+\_\+wrapper.\+c.

\index{ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}!ssp\+\_\+spi\+\_\+txrx@{ssp\+\_\+spi\+\_\+txrx}}
\index{ssp\+\_\+spi\+\_\+txrx@{ssp\+\_\+spi\+\_\+txrx}!ssp\+\_\+spi\+\_\+wrapper.\+c@{ssp\+\_\+spi\+\_\+wrapper.\+c}}
\subsubsection[{\texorpdfstring{ssp\+\_\+spi\+\_\+txrx(uint8\+\_\+t $\ast$buf\+Tx, uint8\+\_\+t lenbuf\+Tx, spi\+\_\+return\+\_\+t return\+Type, uint8\+\_\+t $\ast$buf\+Rx, uint8\+\_\+t max\+Len\+Buf\+Rx, spi\+\_\+first\+\_\+t is\+First, spi\+\_\+last\+\_\+t is\+Last)}{ssp_spi_txrx(uint8_t *bufTx, uint8_t lenbufTx, spi_return_t returnType, uint8_t *bufRx, uint8_t maxLenBufRx, spi_first_t isFirst, spi_last_t isLast)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} ssp\+\_\+spi\+\_\+txrx (
\begin{DoxyParamCaption}
\item[{{\bf uint8\+\_\+t} $\ast$}]{buf\+Tx, }
\item[{{\bf uint8\+\_\+t}}]{lenbuf\+Tx, }
\item[{{\bf spi\+\_\+return\+\_\+t}}]{return\+Type, }
\item[{{\bf uint8\+\_\+t} $\ast$}]{buf\+Rx, }
\item[{{\bf uint8\+\_\+t}}]{max\+Len\+Buf\+Rx, }
\item[{{\bf spi\+\_\+first\+\_\+t}}]{is\+First, }
\item[{{\bf spi\+\_\+last\+\_\+t}}]{is\+Last}
\end{DoxyParamCaption}
)}\hypertarget{ssp__spi__wrapper_8c_a7076dfc612a28f48a38953ac064499fc}{}\label{ssp__spi__wrapper_8c_a7076dfc612a28f48a38953ac064499fc}
$<$ Pointer to transmit data

$<$ Pointer to transmit data

$<$ Length of transfer data 

Definition at line 58 of file ssp\+\_\+spi\+\_\+wrapper.\+c.

