\hypertarget{test__magnetometer_8c}{}\section{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/gina/old/test\+\_\+magnetometer.c File Reference}
\label{test__magnetometer_8c}\index{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/gina/old/test\+\_\+magnetometer.\+c@{/home/lkn/off\+Cloud/\+Smartgrid-\/code/\+Git\+Hub/openwsn-\/fw/projects/gina/old/test\+\_\+magnetometer.\+c}}
{\ttfamily \#include \char`\"{}msp430x26x.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}stdint.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}leds.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}opendefs.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}magnetometer.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void} \hyperlink{test__magnetometer_8c_a6288eba0f8e8ad3ab1544ad731eb7667}{main} (\hyperlink{usb__devapi_8h_afabf60e7f57651d6d595a02c75f07cd0}{void})
\begin{DoxyCompactList}\small\item\em This is a standalone test program for the L\+E\+Ds and 32k\+Hz crystal of the G\+I\+NA board. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_p_e___types_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{test__magnetometer_8c_a3166c0ccc862fe8904488dc9275d6955}{magnetometer\+\_\+data} \mbox{[}6\mbox{]}
\begin{DoxyCompactList}\small\item\em This is a standalone test program for the magnetometer of the G\+I\+N\+A2.\+2b/c board. \end{DoxyCompactList}\item 
\hyperlink{_p_e___types_8h_a1f1825b69244eb3ad2c7165ddc99c956}{uint16\+\_\+t} \hyperlink{test__magnetometer_8c_aa12c31d261538a151967e3a8261aeda1}{poipoi}
\item 
\hyperlink{_p_e___types_8h_a1f1825b69244eb3ad2c7165ddc99c956}{uint16\+\_\+t} \hyperlink{test__magnetometer_8c_acd5cd6babc5142b04a7c6a5e6e337b45}{magnetometer\+\_\+x}
\item 
\hyperlink{_p_e___types_8h_a1f1825b69244eb3ad2c7165ddc99c956}{uint16\+\_\+t} \hyperlink{test__magnetometer_8c_a2a2bdc8c8f6de925d1c49e4e5a8b6a16}{old\+\_\+magnetometer\+\_\+x}
\item 
\hyperlink{_p_e___types_8h_a1f1825b69244eb3ad2c7165ddc99c956}{uint16\+\_\+t} \hyperlink{test__magnetometer_8c_a2fb628b30e08f068dff6b8eb013ac4c1}{magnetometer\+\_\+y}
\item 
\hyperlink{_p_e___types_8h_a1f1825b69244eb3ad2c7165ddc99c956}{uint16\+\_\+t} \hyperlink{test__magnetometer_8c_a94aaf394d7f10eacf1e2c55ce0a923d6}{old\+\_\+magnetometer\+\_\+y}
\item 
\hyperlink{_p_e___types_8h_a1f1825b69244eb3ad2c7165ddc99c956}{uint16\+\_\+t} \hyperlink{test__magnetometer_8c_a6813e26b6e29482497d9cb84b7b42745}{magnetometer\+\_\+z}
\item 
\hyperlink{_p_e___types_8h_a1f1825b69244eb3ad2c7165ddc99c956}{uint16\+\_\+t} \hyperlink{test__magnetometer_8c_a94cb82eaf8aa727dc7c4993765d94fe6}{old\+\_\+magnetometer\+\_\+z}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!main@{main}}
\index{main@{main}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{main(void)}{main(void)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf void} main (
\begin{DoxyParamCaption}
\item[{{\bf void}}]{}
\end{DoxyParamCaption}
)}\hypertarget{test__magnetometer_8c_a6288eba0f8e8ad3ab1544ad731eb7667}{}\label{test__magnetometer_8c_a6288eba0f8e8ad3ab1544ad731eb7667}


This is a standalone test program for the L\+E\+Ds and 32k\+Hz crystal of the G\+I\+NA board. 

\begin{DoxyNote}{Note}
The term \char`\"{}crystal\char`\"{} is usually written \char`\"{}\+X\+T\+A\+L\char`\"{} by embedded geeks.
\end{DoxyNote}
Download the program to a G\+I\+NA board, run it, you should see the 4 L\+E\+Ds blinking in sequence with a 500ms period.

The digital outputs are\+:
\begin{DoxyItemize}
\item P2.\+0\+: red L\+ED
\item P2.\+1\+: green L\+ED
\item P2.\+2\+: blue L\+ED
\item P2.\+3\+: red L\+ED
\end{DoxyItemize}

The \char`\"{}inputs\char`\"{} are\+:
\begin{DoxyItemize}
\item X\+IN, X\+O\+UT\+: 32768\+Hz crystal oscillator
\end{DoxyItemize}

The debug pins are\+:
\begin{DoxyItemize}
\item P5.\+6 output the A\+C\+LK (should be 32768\+Hz)
\item P1.\+1 toggles when interrupt T\+I\+M\+E\+R\+A0\+\_\+\+V\+E\+C\+T\+OR fires
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, February 2012 The program starts executing here.
\end{DoxyAuthor}
This is a standalone test program for the L\+E\+Ds and 32k\+Hz crystal of the G\+I\+NA board.

The digital U\+A\+RT interface is\+:
\begin{DoxyItemize}
\item P3.\+7\+: A1\+\_\+\+S\+O\+M\+I\+\_\+\+RX
\item P3.\+8\+: A1\+\_\+\+S\+O\+M\+I\+\_\+\+TX
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, February 2012 The program starts executing here. 
\end{DoxyAuthor}


Definition at line 39 of file test\+\_\+magnetometer.\+c.



\subsection{Variable Documentation}
\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!magnetometer\+\_\+data@{magnetometer\+\_\+data}}
\index{magnetometer\+\_\+data@{magnetometer\+\_\+data}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{magnetometer\+\_\+data}{magnetometer_data}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint8\+\_\+t} magnetometer\+\_\+data\mbox{[}6\mbox{]}}\hypertarget{test__magnetometer_8c_a3166c0ccc862fe8904488dc9275d6955}{}\label{test__magnetometer_8c_a3166c0ccc862fe8904488dc9275d6955}


This is a standalone test program for the magnetometer of the G\+I\+N\+A2.\+2b/c board. 

Download the program to a G\+I\+NA board, run it, and break after a few seconds at the line indicated in the code. Use the Watch Window to see the value of the variables \textquotesingle{}magnetometer\+\_\+x\textquotesingle{}, \textquotesingle{}magnetometer\+\_\+y\textquotesingle{} and \textquotesingle{}magnetometer\+\_\+z\textquotesingle{}.

The digital connection is done through two-\/wire I2C serial bus\+:
\begin{DoxyItemize}
\item P5.\+2\+: B1\+\_\+\+I2\+C\+\_\+\+S\+CL
\item P5.\+1\+: B1\+\_\+\+I2\+C\+\_\+\+S\+DA
\end{DoxyItemize}

The debug pins are\+:
\begin{DoxyItemize}
\item P1.\+1\+: toggles at every measurement
\item P1.\+2\+: on during initial configuration, and toggles upon a new measurement
\item P1.\+3\+: toggles upon an U\+S\+C\+I\+A\+B1\+T\+X\+\_\+\+V\+E\+C\+T\+OR interrupt (in ti\+\_\+i2c.\+c)
\item P1.\+4\+: toggles upon an U\+S\+C\+I\+A\+B1\+R\+X\+\_\+\+V\+E\+C\+T\+OR interrupt (in ti\+\_\+i2c.\+c)
\end{DoxyItemize}

Speed\+:
\begin{DoxyItemize}
\item one measurement every $\sim$242us (no data crunching, just the measurement)
\item one {\itshape new} measurement at 32\+Hz on average
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Leo Keselman \href{mailto:lkeselman@berkeley.edu}{\tt lkeselman@berkeley.\+edu}, July 2010 

Thomas Watteyne \href{mailto:watteyne@eecs.berkeley.edu}{\tt watteyne@eecs.\+berkeley.\+edu}, September 2010 
\end{DoxyAuthor}


Definition at line 33 of file test\+\_\+magnetometer.\+c.

\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!magnetometer\+\_\+x@{magnetometer\+\_\+x}}
\index{magnetometer\+\_\+x@{magnetometer\+\_\+x}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{magnetometer\+\_\+x}{magnetometer_x}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} magnetometer\+\_\+x}\hypertarget{test__magnetometer_8c_acd5cd6babc5142b04a7c6a5e6e337b45}{}\label{test__magnetometer_8c_acd5cd6babc5142b04a7c6a5e6e337b45}


Definition at line 35 of file test\+\_\+magnetometer.\+c.

\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!magnetometer\+\_\+y@{magnetometer\+\_\+y}}
\index{magnetometer\+\_\+y@{magnetometer\+\_\+y}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{magnetometer\+\_\+y}{magnetometer_y}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} magnetometer\+\_\+y}\hypertarget{test__magnetometer_8c_a2fb628b30e08f068dff6b8eb013ac4c1}{}\label{test__magnetometer_8c_a2fb628b30e08f068dff6b8eb013ac4c1}


Definition at line 36 of file test\+\_\+magnetometer.\+c.

\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!magnetometer\+\_\+z@{magnetometer\+\_\+z}}
\index{magnetometer\+\_\+z@{magnetometer\+\_\+z}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{magnetometer\+\_\+z}{magnetometer_z}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} magnetometer\+\_\+z}\hypertarget{test__magnetometer_8c_a6813e26b6e29482497d9cb84b7b42745}{}\label{test__magnetometer_8c_a6813e26b6e29482497d9cb84b7b42745}


Definition at line 37 of file test\+\_\+magnetometer.\+c.

\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!old\+\_\+magnetometer\+\_\+x@{old\+\_\+magnetometer\+\_\+x}}
\index{old\+\_\+magnetometer\+\_\+x@{old\+\_\+magnetometer\+\_\+x}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{old\+\_\+magnetometer\+\_\+x}{old_magnetometer_x}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} old\+\_\+magnetometer\+\_\+x}\hypertarget{test__magnetometer_8c_a2a2bdc8c8f6de925d1c49e4e5a8b6a16}{}\label{test__magnetometer_8c_a2a2bdc8c8f6de925d1c49e4e5a8b6a16}


Definition at line 35 of file test\+\_\+magnetometer.\+c.

\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!old\+\_\+magnetometer\+\_\+y@{old\+\_\+magnetometer\+\_\+y}}
\index{old\+\_\+magnetometer\+\_\+y@{old\+\_\+magnetometer\+\_\+y}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{old\+\_\+magnetometer\+\_\+y}{old_magnetometer_y}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} old\+\_\+magnetometer\+\_\+y}\hypertarget{test__magnetometer_8c_a94aaf394d7f10eacf1e2c55ce0a923d6}{}\label{test__magnetometer_8c_a94aaf394d7f10eacf1e2c55ce0a923d6}


Definition at line 36 of file test\+\_\+magnetometer.\+c.

\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!old\+\_\+magnetometer\+\_\+z@{old\+\_\+magnetometer\+\_\+z}}
\index{old\+\_\+magnetometer\+\_\+z@{old\+\_\+magnetometer\+\_\+z}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{old\+\_\+magnetometer\+\_\+z}{old_magnetometer_z}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} old\+\_\+magnetometer\+\_\+z}\hypertarget{test__magnetometer_8c_a94cb82eaf8aa727dc7c4993765d94fe6}{}\label{test__magnetometer_8c_a94cb82eaf8aa727dc7c4993765d94fe6}


Definition at line 37 of file test\+\_\+magnetometer.\+c.

\index{test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}!poipoi@{poipoi}}
\index{poipoi@{poipoi}!test\+\_\+magnetometer.\+c@{test\+\_\+magnetometer.\+c}}
\subsubsection[{\texorpdfstring{poipoi}{poipoi}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf uint16\+\_\+t} poipoi}\hypertarget{test__magnetometer_8c_aa12c31d261538a151967e3a8261aeda1}{}\label{test__magnetometer_8c_aa12c31d261538a151967e3a8261aeda1}


Definition at line 34 of file test\+\_\+magnetometer.\+c.

